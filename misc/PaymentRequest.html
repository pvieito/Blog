<html>
    <body>
        <script>
            function paymentRequest() {
                var methodData = [{
                                      supportedMethods: ["https://apple.com/apple-pay"],
                                      data: {
                                          version: 2,
                                          merchantIdentifier: '',
                                          merchantCapabilities: ['supports3DS'],
                                          supportedNetworks: ['visa', 'masterCard'],
                                          countryCode: 'ES',
                                      }
                                  },
                                  {
                                      supportedMethods: ['basic-card'],
                                      data: {
                                          supportedNetworks: ['visa', 'mastercard', 'amex'],
                                          supportedTypes: ['credit']
                                      }
                                  }
                                  ];
                                  
                                  var subtotal = 0.01;
                                  var tax = 0.00;
                                  
                                  var details = {
                                      total: {
                                          label: 'Total Due',
                                          amount: { currency: 'EUR', value: (subtotal + tax).toFixed(2) }
                                      },
                                      displayItems: [{
                                                     label: 'PVIEITO',
                                                     amount: { currency: 'EUR', value: subtotal.toFixed(2) }
                                                     },
                                                     {
                                                     label: 'Apple Pay + PaymentRequest JS',
                                                     amount: { currency: 'EUR', value: tax.toFixed(2) }
                                                     }]
                                  };
                                  
                                  var options = { requestShipping: false };
                                  var request = new PaymentRequest(methodData, details, options);
                                  
                                  //Listen to a shipping option change
                                  request.addEventListener('shippingoptionchange', function(changeEvent) {
                                                           changeEvent.updateWith(new Promise(function(resolve) {
                                                                                              onShippingOptionChange(request, details, subtotal, tax);
                                                                                              resolve(details);
                                                                                              }));
                                                           });
                                                           
                                                           //Show the Native UI
                                                           request.show()
            }
        </script>
        <form>
            <div align="center">
                <input type="button" value="Payment Request" name="PaymentRequest" onclick="paymentRequest()" />
            </div>
        </form>
    </body>
</html>

